import{a as q}from"./axios-upsvKRUO.js";import{A as H}from"./index-CzIE3b4h.js";import{t as N}from"./methods-DEDIBE-t.js";import{d as E,A as k,j as t,w as T,o as M,k as O,B as D,b as c,c as r,e,F as C,i as $,q as z,C as I,p as F,_ as R,a as P,f as B,m as x,t as U}from"./index-BzLU-hWo.js";const X=["src","alt"],G={class:"carousel-indicators"},J=["onClick"],K=E({__name:"index",props:{images:{},width:{},height:{},interval:{}},setup(A){const n=A,p=k(()=>[...n.images,n.images[0]]),o=t(0),u=t(null),a=t(n.width||600),_=t(n.height||400),L=n.interval||3e3,d=t(!0),j=k(()=>o.value%n.images.length);T(()=>n.width,l=>{a.value=l||600}),T(()=>n.height,l=>{_.value=l||400});const g=k(()=>p.value.length),b=k(()=>({transform:`translateX(-${o.value*a.value}px)`,transition:d.value?"transform 0.5s ease":"none"})),w=l=>({width:`${a.value}px`,height:`${_.value}px`}),S=()=>{o.value+=1,o.value===g.value-1&&setTimeout(()=>{d.value=!1,o.value=0,requestAnimationFrame(()=>{d.value=!0})},500)},m=()=>{i(),document.visibilityState==="visible"&&(u.value=setInterval(S,L))},i=()=>{u.value&&(clearInterval(u.value),u.value=null)},s=()=>{document.visibilityState==="visible"?m():i()},h=N(()=>{m()},200);M(()=>{m(),window.addEventListener("resize",h),document.addEventListener("visibilitychange",s)}),O(()=>{i(),window.removeEventListener("resize",h),document.removeEventListener("visibilitychange",s)});const f=l=>{o.value=l,m()};return(l,fe)=>{const V=D("img-loader");return c(),r("div",{class:"carousel-container",style:z({width:`${a.value}px`}),onMouseenter:i,onMouseleave:m},[e("div",{class:"carousel-wrapper",style:z(b.value)},[(c(!0),r(C,null,$(p.value,(W,v)=>(c(),r("div",{class:"carousel-item",key:v,style:z(w())},[I(e("img",{src:W,alt:"Image "+v,class:"carousel-image"},null,8,X),[[V,W]])],4))),128))],4),e("div",G,[(c(!0),r(C,null,$(l.images,(W,v)=>(c(),r("span",{key:v,class:F(["indicator-dot",{active:j.value===v}]),onClick:ge=>f(v)},null,10,J))),128))])],36)}}}),Q=R(K,[["__scopeId","data-v-5e4138d2"]]),Y={class:"shu-mian"},Z={class:"shu-content"},ee={class:"shu-content-banner"},te={class:"shu-content-banner-recommend"},se={class:"item"},ae={href:"",class:"thumbnail"},ie={alt:""},ne={class:"item"},oe={href:"",class:"thumbnail"},le={alt:""},ce={class:"shu-content-hot"},re={class:"shu-content-hot-list"},ue={href:"",class:"link"},de={class:"inner"},me={class:"img-wrapper"},he={class:"image",alt:""},ve={class:"shu-content-title"},pe=["onClick"],_e=E({__name:"index",setup(A){const n=t([{name:"最新文章",key:"recommend"},{name:"热门文章",key:"hot"},{name:"评论最多",key:"new"},{name:"评论最多",key:"front"},{name:"点赞最多",key:"back"}]),p=t(["https://pic3.zhimg.com/v2-438ae100f06ccf947031b406d84a4f0a_r.jpg","https://img-baofun.zhhainiao.com/pcwallpaper_ugc/static/7a67dece8aff3b212fa180d8c1f7eac5.jpg?x-oss-process=image%2fresize%2cm_lfit%2cw_1920%2ch_1080","https://img-baofun.zhhainiao.com/pcwallpaper_ugc/static/ea1338f685ec2c7b4348ba5e17f08dd0.jpg?x-oss-process=image%2fresize%2cm_lfit%2cw_1920%2ch_1080","https://img-baofun.zhhainiao.com/pcwallpaper_ugc/static/86f3f30c32342a017f699fab73c0481f.jpg?x-oss-process=image%2fresize%2cm_lfit%2cw_1920%2ch_1080","https://img-baofun.zhhainiao.com/pcwallpaper_ugc/static/fb1da048d1b5ebdbcdac2db6a9e69ad8.jpg?x-oss-process=image%2fresize%2cm_lfit%2cw_1920%2ch_1080","https://img-baofun.zhhainiao.com/pcwallpaper_ugc/static/ea73c0013ecd439cccc3aced51ef60d7.jpg?x-oss-process=image%2fresize%2cm_lfit%2cw_1920%2ch_1080"]);let o=t(0),u=t(null);const a=t(null);let _=t(0),L=t(56.0059);const d=t(null),j=i=>{o.value=i,_.value=(u.value[i].offsetWidth+20)*i},g=t(0),b=t(0),w=new ResizeObserver(()=>{a.value&&(b.value=a.value.clientHeight,g.value=a.value.clientWidth)}),S=()=>{d.value&&d.value.readMore()},m=async()=>{try{const i=await q.get("http://localhost:3000/carousel-images");p.value=i.data.images.map(s=>`data:${s.mime_type};base64,${s.url}`)}catch(i){console.log("error",i)}};return M(()=>{a.value&&w.observe(a.value),m()}),P(()=>{a.value&&w.unobserve(a.value)}),(i,s)=>{const y=D("img-loader");return c(),r("div",Y,[e("div",Z,[e("div",ee,[e("div",{class:"swiper-container",ref_key:"swiperContainer",ref:a},[B(Q,{images:p.value,width:g.value,height:b.value,interval:3e3},null,8,["images","width","height"])],512),e("div",te,[e("figure",se,[e("a",ae,[I(e("img",ie,null,512),[[y,"https://b0.bdstatic.com/fd8b1444613835e392afbf801c24b0e5.jpg@h_1280"]])]),s[0]||(s[0]=e("figcaption",{class:"information"},[e("span",{class:"type"},"推荐"),e("div",{class:"text"},"孤帆远影碧空尽，唯见长江天际流。")],-1))]),e("figure",ne,[e("a",oe,[I(e("img",le,null,512),[[y,"https://b0.bdstatic.com/fd8b1444613835e392afbf801c24b0e5.jpg@h_1280"]])]),s[1]||(s[1]=e("figcaption",{class:"information"},[e("span",{class:"type"},"推荐"),e("div",{class:"text"},"桃花潭水深千尺，不及汪伦送我情。")],-1))])])]),e("div",ce,[e("ul",re,[(c(),r(C,null,$(4,h=>e("li",{class:"item",key:h},[e("a",ue,[e("figure",de,[s[2]||(s[2]=e("span",{class:"views"},"44,800 ℃",-1)),e("div",me,[I(e("img",he,null,512),[[y,"https://b0.bdstatic.com/fd8b1444613835e392afbf801c24b0e5.jpg@h_1280"]])]),s[3]||(s[3]=e("figcaption",{class:"title"}," 日照香炉生紫烟，遥看瀑布挂前川。 ",-1))])])])),64))])]),e("div",ve,[e("ul",null,[(c(!0),r(C,null,$(n.value,(h,f)=>(c(),r("li",{key:f,class:F(["item",f===x(o)?"active":""]),onClick:l=>j(f),ref_for:!0,ref_key:"tabWidth",ref:u},U(h.name),11,pe))),128)),e("li",{class:"line",style:z({left:x(_)+"px",width:x(L)+"px"})},null,4)])]),B(H,{ref_key:"sonArticlesList",ref:d,activeIndex:x(o)},null,8,["activeIndex"])]),e("div",null,[e("div",{class:"shu-pagination",onClick:S},"查看更多")])])}}}),xe=R(_e,[["__scopeId","data-v-9a14f046"]]);export{xe as default};
